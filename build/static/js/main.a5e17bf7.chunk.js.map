{"version":3,"sources":["redux/contacts/contacts-operations.js","redux/auth/auth-operations.js","components/UserMenu/UserMenu.module.css","redux/filter/filter-actions.js","components/Loader/Loader.js","components/AppBar/AppBar.module.css","components/Loader/Loader.module.css","App.module.css","components/Navigation/Navigation.module.css","redux/auth/auth-selectors.js","components/Navigation/Navigation.js","components/AuthNav/AuthNav.js","components/UserMenu/UserMenu.js","components/AppBar/AppBar.js","components/PrivateRoute.js","components/PublicRoute.js","App.js","redux/contacts/contacts-reducer.js","redux/filter/filter-reducer.js","redux/auth/auth-slice.js","redux/store.js","index.js"],"names":["fetchContacts","createAsyncThunk","a","axios","get","data","addContact","contact","post","deleteContact","contactId","delete","defaults","baseURL","token","headers","common","Authorization","registration","credentials","console","log","login","logout","refreshUser","_","getState","state","auth","response","initialState","user","isLoggedIn","isLoading","module","exports","changeFilter","createAction","Spinner","className","s","loader","type","color","height","width","timeout","getIsLoggedIn","getUserName","name","getToken","Navigation","useSelector","wrapper","list","item","to","isActive","activeLink","link","AuthNav","UserMenu","dispatch","useDispatch","container","text","btn__out","onClick","AppBar","PrivateRoute","children","PublicRoute","restricted","HomePage","lazy","ContactsPage","LoginPage","RegistrationPage","App","useEffect","fallback","Loader","path","element","items","createReducer","fulfilled","payload","filter","id","loading","pending","rejected","authSlice","createSlice","email","extraReducers","action","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","contactsPersistConfig","key","storage","whitelist","rootReducer","combineReducers","contactsReducer","filterReducer","store","configureStore","reducer","persistReducer","contacts","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","document","querySelector"],"mappings":"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","file":"static/js/main.a5e17bf7.chunk.js","sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nexport const fetchContacts = createAsyncThunk(\n  'contacts/fetchContacts',\n  async () => {\n    const { data } = await axios.get('/contacts');\n    return data;\n  },\n);\n\nexport const addContact = createAsyncThunk(\n  'contacts/addContact',\n  async contact => {\n    const { data } = await axios.post('/contacts', contact);\n    return data;\n  },\n);\n\nexport const deleteContact = createAsyncThunk(\n  'contacts/deleteContact',\n  async contactId => {\n    await axios.delete(`/contacts/${contactId}`);\n    return contactId;\n  },\n);\n","import axios from 'axios';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nexport const token = {\n  set(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset() {\n    axios.defaults.headers.common.Authorization = '';\n  },\n};\n\nexport const registration = createAsyncThunk(\n  'auth/registration',\n  async credentials => {\n    try {\n      const { data } = await axios.post('/users/signup', credentials);\n      token.set(data.token);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  },\n);\n\nexport const login = createAsyncThunk('auth/login', async credentials => {\n  try {\n    const { data } = await axios.post('/users/login', credentials);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nexport const logout = createAsyncThunk('auth/logout', async () => {\n  try {\n    await axios.post('/users/logout');\n    token.unset();\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nexport const refreshUser = createAsyncThunk(\n  'auth/refreshUser',\n  async (_, { getState }) => {\n    const state = getState();\n    if (!state.auth.token) {\n      return;\n    }\n    try {\n      token.set(state.auth.token);\n      const response = await axios.get('/users/current');\n      const initialState = {\n        user: response.data,\n        token: state.auth.token,\n        isLoggedIn: true,\n        isLoading: false,\n      };\n      return initialState;\n    } catch (error) {\n      console.log(error);\n    }\n  },\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserMenu_container__16629\",\"avatar\":\"UserMenu_avatar__KCfuw\",\"text\":\"UserMenu_text__1yuHQ\",\"btn__out\":\"UserMenu_btn__out__3KTlj\"};","import { createAction } from '@reduxjs/toolkit';\n\nexport const changeFilter = createAction('contacts/changeFilter');\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './Loader.module.css';\n\nexport default function Spinner() {\n  return (\n    <div className={s.loader}>\n      <Loader\n        type=\"ThreeDots\"\n        color=\"#5a7ffa\"\n        height={80}\n        width={80}\n        timeout={2000} //3 secs\n      />\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AppBar_container__1bEbw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__2KAXn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__3hAAW\",\"title\":\"App_title__pGCHC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Navigation_wrapper__2Eu6P\",\"list\":\"Navigation_list__WPLWk\",\"item\":\"Navigation_item__3CR5X\",\"link\":\"Navigation_link__6Qj8u\",\"auth\":\"Navigation_auth__2PtJv\",\"activeLink\":\"Navigation_activeLink__2oX_j Navigation_link__6Qj8u\",\"btn__out\":\"Navigation_btn__out__12C5W\"};","export const getIsLoggedIn = state => state.auth.isLoggedIn;\nexport const getUserName = state => state.auth.user.name;\nexport const getToken = state => state.auth.token;\nexport const getIsFetchingCurrent = state => state.auth.isLoading;\n","import { NavLink } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { getIsLoggedIn } from '../../redux/auth/auth-selectors';\nimport s from './Navigation.module.css';\n\nexport default function Navigation() {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n  return (\n    <nav className={s.wrapper}>\n      <ul className={s.list}>\n        <li className={s.item}>\n          <NavLink\n            to=\"/\"\n            className={({ isActive }) =>\n              isActive ? `${s.activeLink}` : `${s.link}`\n            }\n          >\n            Home\n          </NavLink>\n        </li>\n        <li className={s.item}>\n          {isLoggedIn && (\n            <NavLink\n              to=\"/contacts\"\n              className={({ isActive }) =>\n                isActive ? `${s.activeLink}` : `${s.link}`\n              }\n            >\n              Contacts\n            </NavLink>\n          )}\n        </li>\n      </ul>\n    </nav>\n  );\n}\n","import { NavLink } from 'react-router-dom';\nimport s from '../Navigation/Navigation.module.css';\n\nexport default function AuthNav() {\n  return (\n    <ul className={s.auth}>\n      <li className={s.item}>\n        <NavLink\n          to=\"/login\"\n          className={({ isActive }) =>\n            isActive ? `${s.activeLink}` : `${s.link}`\n          }\n        >\n          Login\n        </NavLink>\n      </li>\n      <li className={s.item}>\n        <NavLink\n          to=\"/registration\"\n          className={({ isActive }) =>\n            isActive ? `${s.activeLink}` : `${s.link}`\n          }\n        >\n          Registration\n        </NavLink>\n      </li>\n    </ul>\n  );\n}\n","import { useSelector, useDispatch } from 'react-redux';\nimport { getUserName } from '../../redux/auth/auth-selectors';\nimport { logout } from '../../redux/auth/auth-operations';\nimport s from './UserMenu.module.css';\n\nexport default function UserMenu() {\n  const dispatch = useDispatch();\n  const name = useSelector(getUserName);\n\n  return (\n    <div className={s.container}>\n      <span className={s.text}>Wellcome to phonebook, {name}!</span>\n\n      <button\n        type=\"button\"\n        className={s.btn__out}\n        onClick={() => dispatch(logout())}\n      >\n        Log out\n      </button>\n    </div>\n  );\n}\n","import { useSelector } from 'react-redux';\nimport Navigation from '../Navigation';\nimport AuthNav from '../AuthNav';\nimport UserMenu from '../UserMenu';\nimport { getIsLoggedIn } from '../../redux/auth/auth-selectors';\n\nimport s from './AppBar.module.css';\n\nexport default function AppBar() {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n  return (\n    <div className={s.container}>\n      <Navigation />\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\n    </div>\n  );\n}\n","import { useSelector } from 'react-redux';\nimport { Navigate } from 'react-router-dom';\nimport { getIsLoggedIn } from '../redux/auth/auth-selectors';\n\nexport default function PrivateRoute({ children }) {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n  return isLoggedIn ? children : <Navigate to=\"/login\" />;\n}\n","import { useSelector } from 'react-redux';\nimport { Navigate } from 'react-router-dom';\nimport { getIsLoggedIn } from '../redux/auth/auth-selectors';\n\nexport default function PublicRoute({ children, restricted = false }) {\n  const isLoggedIn = useSelector(getIsLoggedIn);\n  const shouldNavigate = isLoggedIn && restricted;\n  return shouldNavigate ? <Navigate to=\"/contacts\" /> : children;\n}\n","import { lazy, Suspense } from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport AppBar from './components/AppBar';\nimport Loader from './components/Loader';\nimport PrivateRoute from './components/PrivateRoute';\nimport PublicRoute from './components/PublicRoute';\nimport { fetchContacts } from './redux/contacts/contacts-operations';\nimport { refreshUser } from './redux/auth/auth-operations';\nimport {\n  getToken,\n  getIsLoggedIn,\n} from './redux/auth/auth-selectors';\nimport s from './App.module.css';\n\nconst HomePage = lazy(() =>\n  import('./pages/HomePage/HomePage.js' /* webpackChunkName: \"home-page\" */),\n);\nconst ContactsPage = lazy(() =>\n  import(\n    './pages/ContactsPage/ContactsPage.js' /* webpackChunkName: \"contacts-page\" */\n  ),\n);\nconst LoginPage = lazy(() =>\n  import('./pages/LoginPage/LoginPage.js' /* webpackChunkName: \"login-page\" */),\n);\nconst RegistrationPage = lazy(() =>\n  import(\n    './pages/RegistrationPage/RegistrationPage.js' /* webpackChunkName: \"registration-page\" */\n  ),\n);\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const token = useSelector(getToken);\n  const isLoggedIn = useSelector(getIsLoggedIn);\n\n  useEffect(() => {\n    if (!isLoggedIn) {\n      return;\n    }\n    dispatch(fetchContacts(token));\n  }, [dispatch, isLoggedIn, token]);\n\n  useEffect(() => {\n    dispatch(refreshUser(token));\n  }, [dispatch, token]);\n\n  return (\n    <div className={s.container}>\n      <AppBar />\n\n      <Suspense fallback={<Loader />}>\n        <Routes>\n          <Route\n            path=\"/goit-react-hw-08-phonebook\"\n            element={<Navigate to=\"/\" />}\n          />\n          <Route\n            path=\"/\"\n            element={\n              <PublicRoute>\n                <HomePage />\n              </PublicRoute>\n            }\n          />\n          <Route\n            path=\"/contacts\"\n            element={\n              <PrivateRoute>\n                <ContactsPage />\n              </PrivateRoute>\n            }\n          />\n          <Route\n            path=\"/login\"\n            element={\n              <PublicRoute restricted>\n                <LoginPage />\n              </PublicRoute>\n            }\n          />\n          <Route\n            path=\"/registration\"\n            element={\n              <PublicRoute restricted>\n                <RegistrationPage />\n              </PublicRoute>\n            }\n          />\n        </Routes>\n      </Suspense>\n    </div>\n  );\n}\n","import { createReducer } from '@reduxjs/toolkit';\nimport {\n  fetchContacts,\n  addContact,\n  deleteContact,\n} from './contacts-operations';\n\nexport const items = createReducer([], {\n  [fetchContacts.fulfilled]: (_, { payload }) => payload,\n  [addContact.fulfilled]: (state, { payload }) => [...state, payload],\n  [deleteContact.fulfilled]: (state, { payload }) =>\n    state.filter(({ id }) => id !== payload),\n});\n\nexport const loading = createReducer(false, {\n  [fetchContacts.pending]: () => true,\n  [fetchContacts.fulfilled]: () => false,\n  [fetchContacts.rejected]: () => false,\n  [addContact.pending]: () => true,\n  [addContact.fulfilled]: () => false,\n  [addContact.rejected]: () => false,\n  [deleteContact.pending]: () => true,\n  [deleteContact.fulfilled]: () => false,\n  [deleteContact.rejected]: () => false,\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { changeFilter } from './filter-actions';\n\nconst filter = createReducer('', {\n  [changeFilter]: (_, { payload }) => payload,\n});\n\nexport default filter;\n","import { createSlice } from '@reduxjs/toolkit';\nimport { registration, login, logout, refreshUser } from './auth-operations';\n\nconst initialState = {\n  user: { name: null, email: null },\n  token: null,\n  isLoggedIn: false,\n  isLoading: false,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: {\n    [registration.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.token = action.payload.token;\n      state.user = action.payload.user;\n      state.isLoggedIn = true;\n    },\n\n    [login.fulfilled]: (state, action) => {\n      state.isLoading = false;\n      state.token = action.payload.token;\n      state.user = action.payload.user;\n      state.isLoggedIn = true;\n    },\n    [logout.pending]: (state, _) => {\n      state.isLoading = true;\n    },\n    [logout.fulfilled]: (state, _) => {\n      state.isLoading = false;\n      state.token = null;\n      state.user = { name: '', email: '' };\n      state.isLoggedIn = false;\n    },\n    // [refreshUser.pending]: (state, _) => {\n    //   state.isLoading = false;\n    // },\n    [refreshUser.fulfilled]: (_, action) => action.payload,\n    // [refreshUser.rejected]: (state, action) => {\n    //   state.isLoading = false;\n    //   state = { ...action.payload, isLoading: false };\n    // },\n  },\n});\n\nexport default authSlice.reducer;\n","import {\n  configureStore,\n  combineReducers,\n  getDefaultMiddleware,\n} from '@reduxjs/toolkit';\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport * as contactsReducer from './contacts/contacts-reducer';\nimport filterReducer from './filter/filter-reducer';\nimport authSlice from './auth/auth-slice';\n\nconst middleware = [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n];\n\nconst contactsPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\nconst rootReducer = combineReducers({\n  items: contactsReducer.items,\n  filter: filterReducer,\n  loading: contactsReducer.loading,\n});\n\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(contactsPersistConfig, authSlice),\n    contacts: rootReducer,\n  },\n  middleware,\n  devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from './App';\nimport { store, persistor } from './redux/store';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.querySelector('#root'),\n);\n"],"sourceRoot":""}