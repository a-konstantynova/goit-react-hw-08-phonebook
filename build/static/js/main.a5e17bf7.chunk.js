(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{10:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return b}));var c=n(9),a=n.n(c),r=n(17),i=n(3),o=n(14),u=n.n(o),s=Object(i.c)("contacts/fetchContacts",Object(r.a)(a.a.mark((function t(){var e,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("/contacts");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))),l=Object(i.c)("contacts/addContact",function(){var t=Object(r.a)(a.a.mark((function t(e){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("/contacts",e);case 2:return n=t.sent,c=n.data,t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),b=Object(i.c)("contacts/deleteContact",function(){var t=Object(r.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.delete("/contacts/".concat(e));case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},16:function(t,e,n){"use strict";n.d(e,"d",(function(){return b})),n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return f}));var c=n(9),a=n.n(c),r=n(17),i=n(14),o=n.n(i),u=n(3);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var s=function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},l=function(){o.a.defaults.headers.common.Authorization=""},b=Object(u.c)("auth/registration",function(){var t=Object(r.a)(a.a.mark((function t(e){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/signup",e);case 3:return n=t.sent,c=n.data,s(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),j=Object(u.c)("auth/login",function(){var t=Object(r.a)(a.a.mark((function t(e){var n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/login",e);case 3:return n=t.sent,c=n.data,s(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),d=Object(u.c)("auth/logout",Object(r.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/logout");case 3:l(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),f=Object(u.c)("auth/refreshUser",function(){var t=Object(r.a)(a.a.mark((function t(e,n){var c,r,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState,(r=c()).auth.token){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,s(r.auth.token),t.next=8,o.a.get("/users/current");case 8:return i=t.sent,u={user:i.data,token:r.auth.token,isLoggedIn:!0,isLoading:!1},t.abrupt("return",u);case 13:t.prev=13,t.t0=t.catch(4),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e,n){return t.apply(this,arguments)}}())},26:function(t,e,n){t.exports={container:"UserMenu_container__16629",avatar:"UserMenu_avatar__KCfuw",text:"UserMenu_text__1yuHQ",btn__out:"UserMenu_btn__out__3KTlj"}},37:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var c=n(3),a=Object(c.b)("contacts/changeFilter")},38:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var c=n(42),a=n.n(c),r=(n(93),n(43)),i=n.n(r),o=n(1);function u(){return Object(o.jsx)("div",{className:i.a.loader,children:Object(o.jsx)(a.a,{type:"ThreeDots",color:"#5a7ffa",height:80,width:80,timeout:2e3})})}},41:function(t,e,n){t.exports={container:"AppBar_container__1bEbw"}},43:function(t,e,n){t.exports={loader:"Loader_loader__2KAXn"}},44:function(t,e,n){t.exports={container:"App_container__3hAAW",title:"App_title__pGCHC"}},7:function(t,e,n){t.exports={wrapper:"Navigation_wrapper__2Eu6P",list:"Navigation_list__WPLWk",item:"Navigation_item__3CR5X",link:"Navigation_link__6Qj8u",auth:"Navigation_auth__2PtJv",activeLink:"Navigation_activeLink__2oX_j Navigation_link__6Qj8u",btn__out:"Navigation_btn__out__12C5W"}},96:function(t,e,n){},97:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(24),i=n.n(r),o=n(6),u=n(15),s=n(40),l=n(2),b=function(t){return t.auth.isLoggedIn},j=function(t){return t.auth.user.name},d=function(t){return t.auth.token},f=n(7),O=n.n(f),p=n(1);function h(){var t=Object(o.c)(b);return Object(p.jsx)("nav",{className:O.a.wrapper,children:Object(p.jsxs)("ul",{className:O.a.list,children:[Object(p.jsx)("li",{className:O.a.item,children:Object(p.jsx)(u.b,{to:"/",className:function(t){var e=t.isActive;return"".concat(e?O.a.activeLink:O.a.link)},children:"Home"})}),Object(p.jsx)("li",{className:O.a.item,children:t&&Object(p.jsx)(u.b,{to:"/contacts",className:function(t){var e=t.isActive;return"".concat(e?O.a.activeLink:O.a.link)},children:"Contacts"})})]})})}function v(){return Object(p.jsxs)("ul",{className:O.a.auth,children:[Object(p.jsx)("li",{className:O.a.item,children:Object(p.jsx)(u.b,{to:"/login",className:function(t){var e=t.isActive;return"".concat(e?O.a.activeLink:O.a.link)},children:"Login"})}),Object(p.jsx)("li",{className:O.a.item,children:Object(p.jsx)(u.b,{to:"/registration",className:function(t){var e=t.isActive;return"".concat(e?O.a.activeLink:O.a.link)},children:"Registration"})})]})}var x=n(16),g=n(26),_=n.n(g);function m(){var t=Object(o.b)(),e=Object(o.c)(j);return Object(p.jsxs)("div",{className:_.a.container,children:[Object(p.jsxs)("span",{className:_.a.text,children:["Wellcome to phonebook, ",e,"!"]}),Object(p.jsx)("button",{type:"button",className:_.a.btn__out,onClick:function(){return t(Object(x.b)())},children:"Log out"})]})}var k=n(41),w=n.n(k);function N(){var t=Object(o.c)(b);return Object(p.jsxs)("div",{className:w.a.container,children:[Object(p.jsx)(h,{}),t?Object(p.jsx)(m,{}):Object(p.jsx)(v,{})]})}var y=n(38);function L(t){var e=t.children;return Object(o.c)(b)?e:Object(p.jsx)(l.a,{to:"/login"})}function A(t){var e=t.children,n=t.restricted,c=void 0!==n&&n;return Object(o.c)(b)&&c?Object(p.jsx)(l.a,{to:"/contacts"}):e}var C=n(10),z=n(44),I=n.n(z),U=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,106))})),M=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,109))})),S=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,107))})),W=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,108))}));function E(){var t=Object(o.b)(),e=Object(o.c)(d),n=Object(o.c)(b);return Object(c.useEffect)((function(){n&&t(Object(C.c)(e))}),[t,n,e]),Object(c.useEffect)((function(){t(Object(x.c)(e))}),[t,e]),Object(p.jsxs)("div",{className:I.a.container,children:[Object(p.jsx)(N,{}),Object(p.jsx)(c.Suspense,{fallback:Object(p.jsx)(y.a,{}),children:Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{path:"/goit-react-hw-08-phonebook",element:Object(p.jsx)(l.a,{to:"/"})}),Object(p.jsx)(l.b,{path:"/",element:Object(p.jsx)(A,{children:Object(p.jsx)(U,{})})}),Object(p.jsx)(l.b,{path:"/contacts",element:Object(p.jsx)(L,{children:Object(p.jsx)(M,{})})}),Object(p.jsx)(l.b,{path:"/login",element:Object(p.jsx)(A,{restricted:!0,children:Object(p.jsx)(S,{})})}),Object(p.jsx)(l.b,{path:"/registration",element:Object(p.jsx)(A,{restricted:!0,children:Object(p.jsx)(W,{})})})]})})]})}var R,H,J,K=n(25),P=n(3),Q=n(11),T=n(18),X=n(45),B=n.n(X),q=n(4),D=Object(P.d)([],(R={},Object(q.a)(R,C.c.fulfilled,(function(t,e){return e.payload})),Object(q.a)(R,C.a.fulfilled,(function(t,e){var n=e.payload;return[].concat(Object(K.a)(t),[n])})),Object(q.a)(R,C.b.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),R)),F=Object(P.d)(!1,(H={},Object(q.a)(H,C.c.pending,(function(){return!0})),Object(q.a)(H,C.c.fulfilled,(function(){return!1})),Object(q.a)(H,C.c.rejected,(function(){return!1})),Object(q.a)(H,C.a.pending,(function(){return!0})),Object(q.a)(H,C.a.fulfilled,(function(){return!1})),Object(q.a)(H,C.a.rejected,(function(){return!1})),Object(q.a)(H,C.b.pending,(function(){return!0})),Object(q.a)(H,C.b.fulfilled,(function(){return!1})),Object(q.a)(H,C.b.rejected,(function(){return!1})),H)),G=n(37),V=Object(P.d)("",Object(q.a)({},G.a,(function(t,e){return e.payload}))),Y=Object(P.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isLoading:!1},extraReducers:(J={},Object(q.a)(J,x.d.fulfilled,(function(t,e){t.isLoading=!1,t.token=e.payload.token,t.user=e.payload.user,t.isLoggedIn=!0})),Object(q.a)(J,x.a.fulfilled,(function(t,e){t.isLoading=!1,t.token=e.payload.token,t.user=e.payload.user,t.isLoggedIn=!0})),Object(q.a)(J,x.b.pending,(function(t,e){t.isLoading=!0})),Object(q.a)(J,x.b.fulfilled,(function(t,e){t.isLoading=!1,t.token=null,t.user={name:"",email:""},t.isLoggedIn=!1})),Object(q.a)(J,x.c.fulfilled,(function(t,e){return e.payload})),J)}).reducer,Z=Object(K.a)(Object(P.f)({serializableCheck:{ignoredActions:[T.a,T.f,T.b,T.c,T.d,T.e]}})),$={key:"auth",storage:B.a,whitelist:["token"]},tt=Object(Q.b)({items:D,filter:V,loading:F}),et=Object(P.a)({reducer:{auth:Object(T.g)($,Y),contacts:tt},middleware:Z,devTools:!1}),nt=Object(T.h)(et);n(96);i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(o.a,{store:et,children:Object(p.jsx)(s.a,{loading:null,persistor:nt,children:Object(p.jsx)(u.a,{children:Object(p.jsx)(E,{})})})})}),document.querySelector("#root"))}},[[97,5,6]]]);
//# sourceMappingURL=main.a5e17bf7.chunk.js.map